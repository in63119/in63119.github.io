---
title: 가스 최적화 후 느린 트랜잭션 처리
author: IN
date: 2023-2-9 19:47:00 +0800
categories: [Blogging, Blockchain]
tags: [web3.js, Transaction]
pin: true
---

회사에서 NFT 민팅 작업을 하는데, 민팅 로직을 개선한 결과가 너무 마음에 들었다. 결론적으로, 트랜잭션 해시값을 미리 가져와서 민팅을 **비동기적으로 진행할 수 있게** 만들었다. 

<br />

## 배경
회사에서 이더리움 & 폴리곤 메인넷에 NFT 민팅하는 업무를 맡았다. 

<br />

처음으로 진행하는 메인넷 배포 & 민팅에 설레이면서도 불안함을 가지면서 작업을 진행했다.

<br />

폴리곤의 경우, MATIC의 가격이 높지 않아서 민팅에 부담이 없었지만

<br />

이더리움의 경우, 가격이 높아서 그런지 아무리 회사 비용이라고는 해도 부담이 컸다. (이더리움은 오늘 일자(2/11)로 가격이 **약 193 만원** 정도이다.)

<br />

> 개인적으로 블록체인 개발자는 최대한 회사에서 블록체인으로 인한 지출을 줄여줄 수 있게끔 도와주는 역할이라 생각한다.

<br />

이 돈을 아끼고 싶어서 민팅할 때에 최대한 가스비를 적게 설정하고 트랜잭션을 진행하는데, 민팅 한번할 때마다 **약 1분** 정도를 소요했다.

<br />

다행히 기획했던 NFT에 대한 민팅은 잘 진행했지만, 개발자로서 개선해야할 부분이 너무 확연해서 좀 더 디벨롭하기로 한다. 

<br />
<br />

## 이슈


문제는 코드가 **동기적**이다보니 트랜잭션이 해시값을 리턴해줘야 민팅 과정이 끝난다는 것이다. 

<br />
<br />

### 해결과정

> [참고 레퍼런스](https://medium.com/xcblog/simctl-control-ios-simulators-from-command-line-78b9006a20dc)

<br />

사용 가능한 시뮬레이터 디바이스 버전 리스트에서 `디바이스 id`를 가져와서 버전을 지정하여 런 시키는 방법으로 해결했다.

<br />

`xcrun simctl list`로 시뮬레이터 버전 리스트 가져온다.

<br />

<img width="400" alt="스크린샷 2022-12-09 오후 1 30" src="https://user-images.githubusercontent.com/65399118/212581606-8c55196f-6a31-41bb-8e1b-1dda4627d6cf.png">

<br />

`react-native run-ios --udid (디바이스id)`실행 
> 나는 `(iPhone 14)006B56E9-1BE3-43F4-8345-5BCCCA1CF9AA`을 가져왔다.

<br />

<img width="700" alt="스크린샷 2022-12-09 오후 1 30" src="https://user-images.githubusercontent.com/65399118/212582444-014dba20-fc33-4f38-90ec-3696236d53a3.png">

<br />
<br />

## 결과

성공적으로 실행시킬 수 있게 되었다.

<br />

<img width="500" alt="스크린샷 2022-12-09 오후 1 30 33" src="https://user-images.githubusercontent.com/65399118/212582547-9cbf4473-f01d-4b9e-b0f3-d29f369dae66.png">

<br />

### 느낀점

처음엔 Xcode 설정만 만지작 했었는데, 간단히 해결이 되어 버렸다.
<br />
개발엔 답이 없다.
<br />
